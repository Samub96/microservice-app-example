apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Namespace donde se aplicarán todos los recursos
namespace: microservices

# Recursos en orden de dependencia
resources:
  - 00-namespace.yaml
  - 01-configmaps.yaml
  - 02-secrets.yaml
  - 03-redis.yaml
  - 04-users-api.yaml
  - 05-auth-api.yaml
  - 06-todos-api.yaml
  - 07-log-processor.yaml
  - 08-frontend.yaml
  - 09-hpa.yaml
  - 10-network-policies.yaml
  - 11-pdb.yaml
  - 12-monitoring.yaml

# Labels comunes para todos los recursos
commonLabels:
  project: microservices-app
  managed-by: kustomize
  environment: production

# Imágenes que se pueden personalizar
images:
  - name: auth-api
    newTag: v1.0.0
  - name: users-api
    newTag: v1.0.0
  - name: todos-api
    newTag: v1.0.0
  - name: frontend
    newTag: v1.0.0
  - name: log-processor
    newTag: v1.0.0